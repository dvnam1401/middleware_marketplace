{% extends 'base.html' %}
{% block content %}
    <h2>S·∫£n ph·∫©m th∆∞∆°ng m·∫°i</h2>
    <div class="product-list">
        {% for product in products %}
            <div class="product-item">
                <!-- H√¨nh ·∫£nh (ch·ªâ l·∫•y ·∫£nh ƒë·∫ßu ti√™n) -->
                <img src="{{ product.images.0 }}" alt="{{ product.name }}" class="product-image">
                
                <!-- Gi√° v√† gi·∫£m gi√° (gi·∫£ ƒë·ªãnh c√≥ tr∆∞·ªùng discount) -->
                <div class="price-section">
                    {% if product.discount %}
                        <span class="original-price">{{ product.price }} VNƒê</span>
                        <span class="discount">(-{{ product.discount }}%)</span>
                        <span class="final-price">{{ product.price|add:"-50" }} VNƒê</span> <!-- Gi·∫£ ƒë·ªãnh gi·∫£m 50, thay b·∫±ng logic th·ª±c t·∫ø -->
                    {% else %}
                        <span class="final-price">{{ product.price }} VNƒê</span>
                    {% endif %}
                </div>

                <!-- T√™n s·∫£n ph·∫©m -->
                <div class="product-name">
                    {{ product.name }} <!-- Lo·∫°i b·ªè th·∫ª <a> c≈© -->
                </div>

                <!-- Chi ti·∫øt th√™m (gi·∫£ ƒë·ªãnh c√≥ l∆∞·ª£t xem, ƒë√°nh gi√°) -->
                <div class="product-details">
                    <span class="views">üëÄ {{ product.views|default:"33K" }}</span>
                    <span class="rating">‚≠ê {{ product.rating|default:"0" }} / 5</span>
                </div>

                <!-- N√∫t xem chi ti·∫øt -->
                <button class="detail-button" data-product-id="{{ product.product_id }}">Xem chi ti·∫øt</button>
            </div>
        {% empty %}
            <p>Kh√¥ng c√≥ s·∫£n ph·∫©m</p>
        {% endfor %}
    </div>
    <!-- Ph·∫ßn m·ªõi: N√∫t chuy·ªÉn sang ch·ª©c nƒÉng workout plan -->
    <div class="workout-section">
        <h2>T·∫°o K·∫ø Ho·∫°ch T·∫≠p Luy·ªán</h2>
        <p>Nh·∫≠p th√¥ng tin c·ªßa b·∫°n ƒë·ªÉ nh·∫≠n k·∫ø ho·∫°ch t·∫≠p luy·ªán c√° nh√¢n h√≥a t·ª´ server2!</p>
        <button class="workout-button" onclick="window.location.href='{% url 'workout_form' %}'">T·∫°o K·∫ø Ho·∫°ch T·∫≠p Luy·ªán</button>
    </div>
{% endblock %}